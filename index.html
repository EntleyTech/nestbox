<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NestBox - Fresh Eggs Store</title>
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f9fafb;
            --bg-tertiary: #f3f4f6;
            --text-primary: #111827;
            --text-secondary: #4b5563;
            --text-tertiary: #9ca3af;
            --border-color: #d1d5db;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --nav-bg: #ffffff;
            --nav-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            --card-bg: #ffffff;
            --input-border: #d1d5db;
            --input-focus-shadow: rgba(249, 115, 22, 0.1);
            --best-value-bg: #22c55e;
            --error-bg: #ef4444;
            --warning-bg: #f59e0b;
            --success-bg: #22c55e;
        }

        html.dark-mode {
            --bg-primary: #1f2937;
            --bg-secondary: #111827;
            --bg-tertiary: #0f172a;
            --text-primary: #f3f4f6;
            --text-secondary: #d1d5db;
            --text-tertiary: #9ca3af;
            --border-color: #374151;
            --shadow-color: rgba(0, 0, 0, 0.3);
            --nav-bg: #111827;
            --nav-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            --card-bg: #1f2937;
            --input-border: #374151;
            --input-focus-shadow: rgba(249, 115, 22, 0.2);
            --best-value-bg: #16a34a;
            --error-bg: #dc2626;
            --warning-bg: #d97706;
            --success-bg: #16a34a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background-color: var(--bg-primary);
            overflow-x: hidden;
            transition: background-color 0.3s ease, color 0.3s ease;
            font-weight: 400;
            letter-spacing: 0.3px;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -1000px 0;
            }
            100% {
                background-position: 1000px 0;
            }
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-20px);
            }
        }

        #app {
            animation: fadeIn 0.3s ease-in-out;
        }

        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .grid {
            display: grid;
            gap: 1.5rem;
        }

        .grid-cols-3 {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }

        .grid-cols-2 {
            grid-template-columns: repeat(2, 1fr);
        }

        .min-h-screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .bg-gradient {
            background: linear-gradient(to bottom, #fef3c7, #fed7aa);
        }

        .bg-gray-50 {
            background-color: var(--bg-secondary);
        }

        .bg-white {
            background-color: var(--card-bg);
        }

        .bg-orange-500 {
            background-color: #f97316;
        }

        .bg-orange-600 {
            background-color: #ea580c;
        }

        .bg-orange-700 {
            background-color: #c2410c;
        }

        .bg-orange-800 {
            background-color: #92400e;
        }

        .bg-green-500 {
            background-color: var(--success-bg);
        }

        .bg-green-600 {
            background-color: #16a34a;
        }

        .bg-green-100 {
            background-color: #dcfce7;
        }

        .bg-yellow-100 {
            background-color: #fef08a;
        }

        .bg-gray-200 {
            background-color: var(--bg-tertiary);
        }

        .bg-gray-300 {
            background-color: #d1d5db;
        }

        .text-white {
            color: white;
        }

        .text-gray-600 {
            color: var(--text-secondary);
        }

        .text-gray-700 {
            color: var(--text-secondary);
        }

        .text-gray-900 {
            color: var(--text-primary);
        }

        .text-orange-600 {
            color: #ea580c;
        }

        .text-orange-700 {
            color: #c2410c;
        }

        .text-orange-900 {
            color: #78350f;
        }

        .text-green-700 {
            color: #15803d;
        }

        .text-yellow-700 {
            color: #ca8a04;
        }

        .text-red-500 {
            color: #ef4444;
        }

        .text-red-700 {
            color: #b91c1c;
        }

        .text-2xl {
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        .text-3xl {
            font-size: 1.875rem;
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        .text-4xl {
            font-size: 2.25rem;
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        .text-6xl {
            font-size: 3.75rem;
            font-weight: 800;
            letter-spacing: -1px;
        }

        .text-8xl {
            font-size: 6rem;
        }

        .text-lg {
            font-size: 1.125rem;
        }

        .text-xl {
            font-size: 1.25rem;
            font-weight: 700;
        }

        .text-sm {
            font-size: 0.875rem;
            letter-spacing: 0.3px;
        }

        .font-bold {
            font-weight: bold;
        }

        .font-semibold {
            font-weight: 600;
        }

        .font-medium {
            font-weight: 500;
        }

        .mb-1 {
            margin-bottom: 0.25rem;
        }

        .mb-2 {
            margin-bottom: 0.5rem;
        }

        .mb-4 {
            margin-bottom: 1rem;
        }

        .mb-6 {
            margin-bottom: 1.5rem;
        }

        .mb-8 {
            margin-bottom: 2rem;
        }

        .mt-1 {
            margin-top: 0.25rem;
        }

        .mt-2 {
            margin-top: 0.5rem;
        }

        .mt-3 {
            margin-top: 0.75rem;
        }

        .mt-4 {
            margin-top: 1rem;
        }

        .mt-8 {
            margin-top: 2rem;
        }

        .p-4 {
            padding: 1rem;
        }

        .p-6 {
            padding: 1.5rem;
        }

        .p-8 {
            padding: 2rem;
        }

        .px-2 {
            padding-left: 0.5rem;
            padding-right: 0.5rem;
        }

        .px-3 {
            padding-left: 0.75rem;
            padding-right: 0.75rem;
        }

        .px-4 {
            padding-left: 1rem;
            padding-right: 1rem;
        }

        .px-6 {
            padding-left: 1.5rem;
            padding-right: 1.5rem;
        }

        .px-8 {
            padding-left: 2rem;
            padding-right: 2rem;
        }

        .py-1 {
            padding-top: 0.25rem;
            padding-bottom: 0.25rem;
        }

        .py-2 {
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
        }

        .py-3 {
            padding-top: 0.75rem;
            padding-bottom: 0.75rem;
        }

        .py-4 {
            padding-top: 1rem;
            padding-bottom: 1rem;
        }

        .py-12 {
            padding-top: 3rem;
            padding-bottom: 3rem;
        }

        .gap-2 {
            gap: 0.5rem;
        }

        .gap-4 {
            gap: 1rem;
        }

        .gap-6 {
            gap: 1.5rem;
        }

        .rounded {
            border-radius: 0.25rem;
        }

        .rounded-lg {
            border-radius: 0.5rem;
        }

        .rounded-bl-lg {
            border-bottom-left-radius: 0.5rem;
        }

        .rounded-tr-lg {
            border-top-right-radius: 0.5rem;
        }

        .rounded-full {
            border-radius: 9999px;
        }

        .shadow-sm {
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }

        .shadow-md {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .border {
            border: 1px solid var(--border-color);
        }

        .border-b {
            border-bottom: 1px solid var(--border-color);
        }

        .border-gray-300 {
            border-color: var(--border-color);
        }

        .border-t {
            border-top: 1px solid var(--border-color);
        }

        .last\:border-b-0:last-child {
            border-bottom: none;
        }

        button {
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
            font-family: inherit;
            font-weight: 600;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        button:hover:not(:disabled) {
            opacity: 0.95;
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        }

        button:active:not(:disabled) {
            transform: translateY(0);
        }

        button:disabled {
            cursor: not-allowed;
            opacity: 0.5;
        }

        input, textarea, select {
            font-family: inherit;
            border: 2px solid var(--input-border);
            border-radius: 0.75rem;
            padding: 0.875rem 1rem;
            width: 100%;
            transition: all 0.3s ease;
            background-color: var(--card-bg);
            color: var(--text-primary);
            font-size: 1rem;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #f97316;
            box-shadow: 0 0 0 4px var(--input-focus-shadow);
            transform: scale(1.01);
        }

        input::placeholder, textarea::placeholder {
            color: var(--text-tertiary);
        }

        input:valid {
            border-color: #22c55e;
        }

        .flex {
            display: flex;
            align-items: center;
        }

        .flex-col {
            flex-direction: column;
        }

        .justify-center {
            justify-content: center;
        }

        .justify-between {
            justify-content: space-between;
        }

        .text-center {
            text-align: center;
        }

        .text-right {
            text-align: right;
        }

        nav {
            background-color: var(--nav-bg);
            box-shadow: var(--nav-shadow);
            padding: 1.25rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: slideInUp 0.3s ease-out;
            border-bottom: 3px solid transparent;
        }

        nav button {
            transition: color 0.3s ease;
        }

        nav button:hover {
            transform: none;
            box-shadow: none;
            color: #f97316;
        }

        .nav-orange {
            background: linear-gradient(135deg, #ea580c 0%, #f97316 100%);
            color: white;
            border-bottom-color: #c2410c;
        }

        .nav-orange h1 {
            animation: bounce 2s ease-in-out infinite;
            font-size: 1.75rem;
            letter-spacing: 0.5px;
        }

        .theme-toggle {
            background: rgba(249, 115, 22, 0.1);
            padding: 0.5rem 0.75rem;
            font-size: 1.25rem;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-primary);
            border-radius: 0.5rem;
        }

        .theme-toggle:hover {
            background: rgba(249, 115, 22, 0.2);
            transform: rotate(20deg) scale(1.1);
            box-shadow: none;
        }

        .space-y-2 > * + * {
            margin-top: 0.5rem;
        }

        .space-y-3 > * + * {
            margin-top: 0.75rem;
        }

        .space-y-4 > * + * {
            margin-top: 1rem;
        }

        .w-full {
            width: 100%;
        }

        .w-20 {
            width: 5rem;
        }

        .max-w-md {
            max-width: 28rem;
        }

        .max-w-4xl {
            max-width: 56rem;
        }

        .max-w-6xl {
            max-width: 72rem;
        }

        /* Logo styling */
        .logo-home {
            width: 120px;
            height: 120px;
            object-fit: contain;
            filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.25)) drop-shadow(0 0 20px rgba(255, 255, 255, 0.1));
            margin-bottom: 1rem;
            animation: bounce 3s ease-in-out infinite, glow-home 3s ease-in-out infinite;
            transition: transform 0.3s ease;
        }

        .logo-nav {
            width: 35px;
            height: 35px;
            object-fit: contain;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.15));
            transition: all 0.3s ease;
        }

        .logo-nav:hover {
            transform: scale(1.1) rotate(5deg);
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.25));
        }

        .logo-admin {
            width: 35px;
            height: 35px;
            object-fit: contain;
            opacity: 0.9;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.15));
            transition: all 0.3s ease;
        }

        .logo-admin:hover {
            transform: scale(1.1);
            opacity: 1;
            filter: drop-shadow(0 4px 8px rgba(255, 255, 255, 0.3));
        }

        @keyframes glow-home {
            0%, 100% {
                filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.25)) drop-shadow(0 0 20px rgba(255, 255, 255, 0.1));
            }
            50% {
                filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.25)) drop-shadow(0 0 30px rgba(255, 255, 255, 0.2));
            }
        }

        .relative {
            position: relative;
        }

        .absolute {
            position: absolute;
        }

        .top-0 {
            top: 0;
        }

        .right-0 {
            right: 0;
        }

        .hidden {
            display: none;
        }

        .flex-wrap {
            flex-wrap: wrap;
        }

        .items-start {
            align-items: flex-start;
        }

        .page-content {
            width: 100%;
        }

        @media (max-width: 768px) {
            .grid-cols-2 {
                grid-template-columns: 1fr;
            }

            .text-6xl {
                font-size: 2.25rem;
            }

            .text-8xl {
                font-size: 3rem;
            }

            nav {
                flex-direction: column;
                gap: 1rem;
            }

            .flex-wrap {
                flex-wrap: wrap;
            }

            .grid {
                grid-template-columns: 1fr !important;
            }

            /* Chatbot responsive */
            .chatbot-container {
                bottom: 1rem;
                left: 1rem;
                right: 1rem;
            }

            .chatbot-button {
                width: 55px;
                height: 55px;
                font-size: 1.25rem;
            }

            .chatbot-window {
                width: calc(100% - 2rem);
                height: 70vh;
                max-height: 600px;
                bottom: 70px;
                left: 1rem;
                right: 1rem;
            }

            .chatbot-header {
                font-size: 1rem;
            }

            .chatbot-lang-btn {
                font-size: 0.75rem;
                padding: 0.4rem;
            }

            .chatbot-message-content {
                max-width: 85%;
                font-size: 0.85rem;
                padding: 0.6rem 0.8rem;
            }

            .chatbot-suggestion-btn {
                font-size: 0.8rem;
                padding: 0.6rem;
            }

            /* Logo responsive */
            .logo-nav {
                width: 30px;
                height: 30px;
            }

            .logo-home {
                width: 90px;
                height: 90px;
            }

            /* Text sizing */
            .text-2xl {
                font-size: 1.25rem;
            }

            .text-3xl {
                font-size: 1.5rem;
            }

            nav .text-2xl {
                font-size: 1.125rem;
            }

            /* Toast responsive */
            .toast {
                right: 1rem;
                left: 1rem;
                max-width: none;
                bottom: 1rem;
            }

            /* Button sizing */
            button {
                font-size: 0.95rem;
            }

            .px-8 {
                padding-left: 1.5rem;
                padding-right: 1.5rem;
            }

            .py-4 {
                padding-top: 0.75rem;
                padding-bottom: 0.75rem;
            }

            /* Form inputs */
            input, textarea, select {
                font-size: 16px; /* Prevents zoom on iOS */
            }

            .container {
                padding: 1rem !important;
            }
        }

        @media (max-width: 480px) {
            .text-6xl {
                font-size: 1.875rem;
            }

            .text-2xl {
                font-size: 1.125rem;
            }

            .text-3xl {
                font-size: 1.25rem;
            }

            nav {
                padding: 0.75rem;
            }

            nav .text-2xl {
                font-size: 1rem;
            }

            .chatbot-window {
                height: 80vh;
                bottom: 65px;
            }

            .chatbot-button {
                width: 50px;
                height: 50px;
                font-size: 1.1rem;
            }

            .logo-nav {
                width: 25px;
                height: 25px;
            }

            .logo-home {
                width: 70px;
                height: 70px;
            }

            .chatbot-header {
                font-size: 0.9rem;
                padding: 0.75rem;
            }

            .chatbot-messages {
                padding: 0.75rem;
                gap: 0.75rem;
            }

            .chatbot-suggestion-btn {
                font-size: 0.75rem;
                padding: 0.5rem;
            }

            .btn-shop-now {
                padding: 0.75rem 1.5rem !important;
                font-size: 0.95rem !important;
            }

            .container {
                padding: 0.75rem !important;
            }

            .p-6 {
                padding: 1rem;
            }

            .gap-4 {
                gap: 0.75rem;
            }
        }

        @media (min-width: 1024px) {
            .chatbot-window {
                width: 420px;
            }

            .chatbot-container {
                bottom: 2rem;
                left: 2rem;
            }

            nav {
                padding: 1.25rem 1.5rem;
            }

            .container {
                padding: 2rem;
            }
        }

        /* Toast notifications */
        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            color: white;
            padding: 1.25rem 1.75rem;
            border-radius: 0.75rem;
            box-shadow: 0 8px 24px rgba(34, 197, 94, 0.3);
            animation: slideInUp 0.3s ease-out;
            z-index: 1000;
            max-width: 350px;
            font-weight: 600;
            letter-spacing: 0.3px;
        }

        .toast.error {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            box-shadow: 0 8px 24px rgba(239, 68, 68, 0.3);
        }

        .toast.warning {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            box-shadow: 0 8px 24px rgba(245, 158, 11, 0.3);
        }

        /* Loading spinner */
        .spinner {
            border: 4px solid #f3f4f6;
            border-top: 4px solid #f97316;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Product card hover effect */
        .product-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
            border: 1px solid transparent;
            background: linear-gradient(135deg, var(--card-bg) 0%, var(--card-bg) 100%);
        }

        .product-card:hover {
            transform: translateY(-12px);
            box-shadow: 0 20px 40px rgba(249, 115, 22, 0.15);
            border-color: #f97316;
        }

        /* Best value badge animation */
        .best-value-badge {
            animation: bounce 2s ease-in-out infinite;
        }

        /* Cart item animation */
        .cart-item {
            animation: slideInUp 0.3s ease-out;
            transition: all 0.3s ease;
            padding: 1.25rem;
            border-radius: 0.75rem;
            border-left: 4px solid #f97316;
        }

        .cart-item:hover {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        /* Chatbot styling */
        .chatbot-container {
            position: fixed;
            bottom: 2rem;
            left: 2rem;
            z-index: 999;
            font-family: inherit;
        }

        .chatbot-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            color: white;
            border: none;
            cursor: pointer;
            font-size: 1.5rem;
            box-shadow: 0 4px 12px rgba(249, 115, 22, 0.4);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 999;
        }

        .chatbot-button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(249, 115, 22, 0.6);
        }

        .chatbot-button:active {
            transform: scale(0.95);
        }

        .chatbot-window {
            position: absolute;
            bottom: 80px;
            left: 0;
            width: 400px;
            height: 600px;
            background: var(--card-bg);
            border-radius: 1rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
            display: flex;
            flex-direction: column;
            animation: slideInUp 0.3s ease-out;
            overflow: hidden;
        }

        .chatbot-header {
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            color: white;
            padding: 1.25rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            letter-spacing: 0.5px;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .chatbot-close {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .chatbot-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }

        .chatbot-language-selector {
            display: flex;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border-color);
            background: var(--bg-secondary);
        }

        .chatbot-lang-btn {
            flex: 1;
            padding: 0.5rem;
            border: 2px solid var(--border-color);
            background: var(--card-bg);
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.875rem;
            transition: all 0.3s ease;
        }

        .chatbot-lang-btn.active {
            border-color: #f97316;
            color: #f97316;
            background: rgba(249, 115, 22, 0.1);
        }

        .chatbot-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .chatbot-message {
            display: flex;
            animation: slideInUp 0.3s ease-out;
        }

        .chatbot-message.bot {
            justify-content: flex-start;
        }

        .chatbot-message.user {
            justify-content: flex-end;
        }

        .chatbot-message-content {
            max-width: 80%;
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            word-wrap: break-word;
            line-height: 1.5;
            font-size: 0.9rem;
        }

        .chatbot-message.bot .chatbot-message-content {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border-radius: 0 0.75rem 0.75rem 0.75rem;
        }

        .chatbot-message.user .chatbot-message-content {
            background: #f97316;
            color: white;
            border-radius: 0.75rem 0 0.75rem 0.75rem;
        }

        .chatbot-suggestions {
            padding: 1rem;
            border-top: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            max-height: 150px;
            overflow-y: auto;
        }

        .chatbot-suggestion-btn {
            padding: 0.75rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s ease;
            text-align: left;
            color: var(--text-primary);
        }

        .chatbot-suggestion-btn:hover {
            background: rgba(249, 115, 22, 0.1);
            border-color: #f97316;
            color: #f97316;
        }

        @media (max-width: 768px) {
            .chatbot-window {
                width: 100%;
                height: 70vh;
                max-width: calc(100% - 2rem);
                bottom: 80px;
                left: 1rem;
                right: 1rem;
            }
        }

        /* Form styling */
        .form-group {
            animation: slideInUp 0.3s ease-out;
            margin-bottom: 1.5rem;
        }

        .error-message {
            color: #ef4444;
            font-size: 0.875rem;
            margin-top: 0.5rem;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div id="app"></div>

    <script>
        // Toast notification system
        class Toast {
            static show(message, type = 'success', duration = 3000) {
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                toast.textContent = message;
                document.body.appendChild(toast);

                setTimeout(() => {
                    toast.style.animation = 'slideInUp 0.3s ease-out reverse';
                    setTimeout(() => toast.remove(), 300);
                }, duration);
            }
        }

        // Theme Manager
        class ThemeManager {
            constructor() {
                this.THEME_KEY = 'theme-preference';
                this.init();
            }

            init() {
                const savedTheme = Storage.get(this.THEME_KEY);
                if (savedTheme) {
                    this.setTheme(savedTheme);
                } else {
                    this.detectSystemTheme();
                }
            }

            detectSystemTheme() {
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    this.setTheme('dark');
                } else {
                    this.setTheme('light');
                }
                this.watchSystemTheme();
            }

            watchSystemTheme() {
                if (!window.matchMedia) return;
                window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
                    const savedTheme = Storage.get(this.THEME_KEY);
                    if (!savedTheme) {
                        this.setTheme(e.matches ? 'dark' : 'light');
                    }
                });
            }

            setTheme(theme) {
                if (theme === 'dark') {
                    document.documentElement.classList.add('dark-mode');
                } else {
                    document.documentElement.classList.remove('dark-mode');
                }
                Storage.set(this.THEME_KEY, theme);
            }

            toggle() {
                const isDark = document.documentElement.classList.contains('dark-mode');
                this.setTheme(isDark ? 'light' : 'dark');
            }

            isDark() {
                return document.documentElement.classList.contains('dark-mode');
            }
        }

        // Local Storage Manager
        class Storage {
            static set(key, value) {
                localStorage.setItem(key, JSON.stringify(value));
            }

            static get(key) {
                const value = localStorage.getItem(key);
                return value ? JSON.parse(value) : null;
            }

            static remove(key) {
                localStorage.removeItem(key);
            }

            static clear() {
                localStorage.clear();
            }
        }

        // Chatbot for Customer Assistance
        class Chatbot {
            constructor() {
                this.isOpen = false;
                this.language = 'en'; // 'en' or 'sn'
                this.messages = [];
                this.faqData = {
                    en: {
                        greeting: "Hello! üëã I'm here to help with your egg orders. How can I assist you?",
                        questions: [
                            { q: "How much do eggs cost?", a: "Our eggs are priced based on quantity: 6 eggs for $5, 12 eggs for $9, and 24 eggs for $16." },
                            { q: "Do you deliver?", a: "Yes! We deliver fresh eggs to your location. Check our shop for delivery details." },
                            { q: "Are eggs organic?", a: "Yes, all our eggs are from farm-fresh, naturally raised chickens with no artificial additives." },
                            { q: "How do I place an order?", a: "Click 'Shop Now' to browse our products, add items to your cart, and proceed to checkout." },
                            { q: "What's your return policy?", a: "We guarantee fresh eggs on arrival. Contact us within 24 hours if there's any issue." },
                            { q: "Can I cancel my order?", a: "You can cancel orders before processing. Contact our admin for assistance." },
                            { q: "How long do eggs last?", a: "Refrigerated eggs stay fresh for up to 3-4 weeks from purchase." }
                        ]
                    },
                    sn: {
                        greeting: "Howzit! üëã Ndirikutempereza nezve maorder ako eegg. Ndingakubatsire sei?",
                        questions: [
                            { q: "Zvingani maega?", a: "Maega aru anogururanidza nenzira yakasiyana: 6 eggs $5, 12 eggs $9, 24 eggs $16." },
                            { q: "Munoreki?", a: "Hongu! Tinoreki maega akasanana kunzvimbo dzako. Tora zvishanda zakudenga mukushop." },
                            { q: "Maega angu anosanana here?", a: "Hongu, maega ose anu anobva kufarm achinetseka pamwe nokusirikirira kusanana." },
                            { q: "Ndinoranga order sei?", a: "Dzvanya 'Shop Now' kuona maproducts, wedzira ku basket, ugo kupinda checkout." },
                            { q: "Chii chakahuswa neyunreturning?", a: "Tinovimbiswa maega akasanana. Hukutarisa zvegama rimwe kana paine dambudziko." },
                            { q: "Ndinganikisira order yangu here?", a: "Unogona kunzikirira maorder asati achibva. Kumba admin yataura." },
                            { q: "Maega anozvigara nguva yeipi?", a: "Maega akachigawa muMfritshiza anosungira 3-4 evhu shure pakunzwa." }
                        ]
                    }
                };
                this.init();
            }

            init() {
                this.addMessage('bot', this.faqData[this.language].greeting);
            }

            addMessage(sender, content) {
                this.messages.push({ sender, content });
                this.render();
            }

            switchLanguage(lang) {
                this.language = lang;
                this.messages = [];
                this.addMessage('bot', this.faqData[lang].greeting);
            }

            getQuestions() {
                return this.faqData[this.language].questions;
            }

            answerQuestion(questionText) {
                const questions = this.getQuestions();
                const found = questions.find(item => item.q === questionText);
                if (found) {
                    this.addMessage('user', found.q);
                    setTimeout(() => {
                        this.addMessage('bot', found.a);
                    }, 500);
                }
            }

            toggle() {
                this.isOpen = !this.isOpen;
                this.render();
            }

            render() {
                let container = document.querySelector('.chatbot-container');
                if (!container) {
                    container = document.createElement('div');
                    container.className = 'chatbot-container';
                    document.body.appendChild(container);
                }

                const questions = this.getQuestions();
                const suggestionBtns = questions.map(q => `
                    <button class="chatbot-suggestion-btn" onclick="chatbot.answerQuestion('${q.q.replace(/'/g, "\\'")}')">
                        ${q.q}
                    </button>
                `).join('');

                container.innerHTML = `
                    <button class="chatbot-button" onclick="chatbot.toggle()">üí¨</button>
                    ${this.isOpen ? `
                        <div class="chatbot-window">
                            <div class="chatbot-header">
                                <div style="display: flex; align-items: center; gap: 0.75rem;">
                                    <img src="nest.jpg" alt="Logo" class="logo-nav" style="width: 28px; height: 28px;">
                                    <span>NestBox Assistant</span>
                                </div>
                                <button class="chatbot-close" onclick="chatbot.toggle()">‚úï</button>
                            </div>
                            <div class="chatbot-language-selector">
                                <button class="chatbot-lang-btn ${this.language === 'en' ? 'active' : ''}" onclick="chatbot.switchLanguage('en')">English</button>
                                <button class="chatbot-lang-btn ${this.language === 'sn' ? 'active' : ''}" onclick="chatbot.switchLanguage('sn')">Shona</button>
                            </div>
                            <div class="chatbot-messages">
                                ${this.messages.map(msg => `
                                    <div class="chatbot-message ${msg.sender}">
                                        <div class="chatbot-message-content">${msg.content}</div>
                                    </div>
                                `).join('')}
                            </div>
                            <div class="chatbot-suggestions">
                                ${suggestionBtns}
                            </div>
                        </div>
                    ` : ''}
                `;
            }
        }

        // App State Management
        class EggStore {
            constructor() {
                this.products = [
                    { id: 1, name: '4-Egg Pack', eggs: 4, price: 0.50, stock: 200 },
                    { id: 2, name: '8-Egg Pack', eggs: 8, price: 0.99, stock: 200 },
                    { id: 3, name: 'Crate', eggs: 36, price: 3.75, stock: 50 }
                ];

                this.currentPage = 'home';
                this.cart = Storage.get('cart') || [];
                this.orders = Storage.get('orders') || [];
                this.reviews = Storage.get('reviews') || [];
                this.isAdmin = false;
                this.crateSize = 36;
                this.editingProduct = null;

                this.adminEmail = '';
                this.adminPassword = '';

                this.customerInfo = {
                    name: '',
                    phone: '',
                    address: '',
                    payment: 'cash'
                };

                this.isDarkMode = document.documentElement.classList.contains('dark-mode');

                this.render();
            }

            saveCart() {
                Storage.set('cart', this.cart);
            }

            saveOrders() {
                Storage.set('orders', this.orders);
            }

            setPage(page) {
                this.currentPage = page;
                window.scrollTo({ top: 0, behavior: 'smooth' });
                this.render();
            }

            addToCart(product) {
                if (product.stock <= 0) {
                    Toast.show('Product is out of stock', 'warning');
                    return;
                }

                const existing = this.cart.find(item => item.id === product.id);
                if (existing) {
                    existing.quantity++;
                } else {
                    this.cart.push({ ...product, quantity: 1 });
                }
                this.saveCart();
                Toast.show(`${product.name} added to cart!`, 'success');
                this.render();
            }

            updateCartQuantity(id, quantity) {
                if (quantity <= 0) {
                    this.removeFromCart(id);
                    return;
                }

                const item = this.cart.find(i => i.id === id);
                if (item) {
                    item.quantity = quantity;
                    this.saveCart();
                    this.render();
                }
            }

            removeFromCart(id) {
                const item = this.cart.find(i => i.id === id);
                if (item) {
                    Toast.show(`${item.name} removed from cart`, 'success');
                }
                this.cart = this.cart.filter(item => item.id !== id);
                this.saveCart();
                this.render();
            }

            getCartTotal() {
                return this.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0).toFixed(2);
            }

            getCartItemCount() {
                return this.cart.reduce((sum, item) => sum + item.quantity, 0);
            }

            handleCheckout() {
                if (!this.customerInfo.name || !this.customerInfo.phone || !this.customerInfo.address) {
                    Toast.show('Please fill in all fields', 'error');
                    return;
                }

                // Validate phone number
                if (!/^\d{3}-?\d{3}-?\d{4}$/.test(this.customerInfo.phone.replace(/\D/g, ''))) {
                    Toast.show('Please enter a valid phone number', 'error');
                    return;
                }

                const newOrder = {
                    id: Date.now(),
                    items: [...this.cart],
                    total: this.getCartTotal(),
                    customer: { ...this.customerInfo },
                    status: 'pending',
                    date: new Date().toLocaleString()
                };

                this.orders.push(newOrder);
                this.saveOrders();

                // Update stock
                this.cart.forEach(cartItem => {
                    const product = this.products.find(p => p.id === cartItem.id);
                    if (product) {
                        product.stock -= cartItem.quantity;
                    }
                });

                this.cart = [];
                this.saveCart();
                this.customerInfo = { name: '', phone: '', address: '', payment: 'cash' };
                Toast.show('Order placed successfully!', 'success');
                this.setPage('success');
            }

            handleAdminLogin() {
                if (this.adminEmail === 'admin@eggs.com' && this.adminPassword === 'admin123') {
                    this.isAdmin = true;
                    this.setPage('admin');
                    this.adminEmail = '';
                    this.adminPassword = '';
                    Toast.show('Welcome to Admin Dashboard!', 'success');
                } else {
                    Toast.show('Invalid credentials', 'error');
                }
            }

            updateProduct(id, updates) {
                const product = this.products.find(p => p.id === id);
                if (product) {
                    Object.assign(product, updates);
                    Toast.show('Product updated successfully!', 'success');
                }
                this.editingProduct = null;
                this.render();
            }

            markOrderComplete(orderId) {
                const order = this.orders.find(o => o.id === orderId);
                if (order) {
                    order.status = 'completed';
                    this.saveOrders();
                    Toast.show('Order marked as completed!', 'success');
                }
                this.render();
            }

            addReview(orderId, rating, comment) {
                const order = this.orders.find(o => o.id === orderId);
                if (!order) {
                    Toast.show('Order not found', 'error');
                    return;
                }

                const existingReview = this.reviews.find(r => r.orderId === orderId);
                if (existingReview) {
                    existingReview.rating = rating;
                    existingReview.comment = comment;
                    existingReview.date = new Date().toLocaleString();
                } else {
                    this.reviews.push({
                        orderId,
                        rating,
                        comment,
                        customerName: order.customer.name,
                        date: new Date().toLocaleString()
                    });
                }

                Storage.set('reviews', this.reviews);
                Toast.show('Thank you for your review!', 'success');
                this.render();
            }

            getOrderReview(orderId) {
                return this.reviews.find(r => r.orderId === orderId);
            }

            getAverageRating() {
                if (this.reviews.length === 0) return 0;
                const sum = this.reviews.reduce((acc, r) => acc + r.rating, 0);
                return (sum / this.reviews.length).toFixed(1);
            }

            setCrateSize(size) {
                this.crateSize = size;
                const crateProduct = this.products.find(p => p.id === 3);
                if (crateProduct) {
                    crateProduct.eggs = size;
                }
                Toast.show(`Crate size updated to ${size} eggs!`, 'success');
                this.render();
            }

            getBestValueIndex() {
                const unitPrices = this.products.map(p => p.price / p.eggs);
                const minPrice = Math.min(...unitPrices);
                return this.products.findIndex(p => (p.price / p.eggs) === minPrice);
            }            

            render() {
                const app = document.getElementById('app');
                
                if (this.currentPage === 'home') {
                    app.innerHTML = this.renderHome();
                } else if (this.currentPage === 'shop') {
                    app.innerHTML = this.renderShop();
                } else if (this.currentPage === 'cart') {
                    app.innerHTML = this.renderCart();
                } else if (this.currentPage === 'checkout') {
                    app.innerHTML = this.renderCheckout();
                } else if (this.currentPage === 'success') {
                    app.innerHTML = this.renderSuccess();
                } else if (this.currentPage === 'reviews') {
                    app.innerHTML = this.renderReviews();
                } else if (this.currentPage === 'admin-login') {
                    app.innerHTML = this.renderAdminLogin();
                } else if (this.currentPage === 'admin') {
                    app.innerHTML = this.renderAdminDashboard();
                }

                this.attachEventListeners();
            }

            renderHome() {
                return `
                    <div class="min-h-screen flex-col" style="
                        background: linear-gradient(135deg, rgba(249, 115, 22, 0.85) 0%, rgba(217, 119, 6, 0.85) 50%, rgba(124, 45, 18, 0.85) 100%), url('home.jpg') center/cover no-repeat;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        position: relative;
                        overflow: hidden;
                    ">
                        <!-- Decorative elements -->
                        <div style="position: absolute; top: -50px; right: -50px; width: 300px; height: 300px; background: rgba(255, 255, 255, 0.1); border-radius: 50%; filter: blur(40px); animation: float 6s ease-in-out infinite;"></div>
                        <div style="position: absolute; bottom: -100px; left: -100px; width: 400px; height: 400px; background: rgba(255, 255, 255, 0.05); border-radius: 50%; filter: blur(60px); animation: float 8s ease-in-out infinite reverse;"></div>
                        
                        <div class="text-center" style="position: relative; z-index: 10;">
                            <img src="nest.jpg" alt="Nest Logo" class="logo-home">
                            <h1 class="text-6xl font-bold text-white mb-4" style="text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3); letter-spacing: -1px;">NestBox</h1>
                            <p class="text-2xl text-white mb-8" style="text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.3); font-weight: 500;">Affordable, uniform-size eggs delivered fresh</p>
                            <button class="btn-shop-now text-white px-8 py-4 rounded-lg text-xl font-bold hover:bg-orange-600 transition" style="background: linear-gradient(135deg, #ffffff 0%, #f3f4f6 100%); color: #c2410c; box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2); letter-spacing: 0.5px;">
                                üõí Shop Now
                            </button>
                            <div class="mt-8 flex gap-4 justify-center">
                                <button class="btn-view-reviews text-white text-sm underline" style="background: rgba(255, 255, 255, 0.2); padding: 0.5rem 1rem; border-radius: 0.5rem; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.3); transition: all 0.3s ease;">
                                    ‚≠ê View Customer Reviews
                                </button>
                                <span style="color: rgba(255, 255, 255, 0.5);">‚Ä¢</span>
                                <button class="btn-admin-login text-white text-sm underline" style="background: rgba(255, 255, 255, 0.2); padding: 0.5rem 1rem; border-radius: 0.5rem; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.3); transition: all 0.3s ease;">
                                    üîê Admin Login
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }

            renderShop() {
                const bestValueIndex = this.getBestValueIndex();

                return `
                    <div class="bg-gray-50" style="min-height: 100vh;">
                        <nav class="shadow-sm">
                            <div style="display: flex; align-items: center; gap: 0.75rem;">
                                <img src="nest.jpg" alt="Nest Logo" class="logo-nav">
                                <h1 class="text-2xl font-bold text-orange-900">NestBox</h1>
                            </div>
                            <div class="flex gap-4">
                                <button class="btn-home text-gray-600 hover:text-gray-900" style="background: none; padding: 0;">
                                    Home
                                </button>
                                <button class="theme-toggle" title="Toggle dark mode">
                                    ${this.isDarkMode ? '‚òÄÔ∏è' : 'üåô'}
                                </button>
                                <button class="btn-cart-view bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 flex">
                                    üõí Cart (${this.getCartItemCount()})
                                </button>
                            </div>
                        </nav>

                        <div class="container" style="padding: 2rem;">
                            <h2 class="text-3xl font-bold text-gray-900 mb-8">Our Products</h2>
                            <div class="grid grid-cols-3" style="gap: 1.5rem;">
                                ${this.products.map((product, index) => `
                                    <div class="product-card bg-white rounded-lg shadow-md p-6 relative" style="position: relative;">
                                        ${index === bestValueIndex ? `
                                            <div class="best-value-badge" style="position: absolute; top: 0; right: 0; background-color: #22c55e; color: white; padding: 0.5rem 0.75rem; border-radius: 0 0.5rem 0 0.5rem; font-size: 0.875rem; font-weight: 600;">
                                                ‚≠ê Best Value
                                            </div>
                                        ` : ''}
                                        <div class="text-5xl mb-4">ü•ö</div>
                                        <h3 class="text-xl font-bold text-gray-900 mb-2">${product.name}</h3>
                                        <p class="text-gray-600 mb-2">${product.eggs} eggs</p>
                                        <p class="text-3xl font-bold text-orange-600 mb-2">$${product.price.toFixed(2)}</p>
                                        <p class="text-sm text-gray-500 mb-4">$${(product.price / product.eggs).toFixed(3)}/egg</p>
                                        <p class="text-sm text-gray-500 mb-4">Stock: ${product.stock}</p>
                                        <button class="btn-add-to-cart w-full bg-orange-500 text-white py-2 rounded-lg hover:bg-orange-600 ${product.stock === 0 ? 'disabled:bg-gray-300 disabled:cursor-not-allowed' : ''}" data-product-id="${product.id}" ${product.stock === 0 ? 'disabled' : ''}>
                                            ${product.stock === 0 ? 'Out of Stock' : 'Add to Cart'}
                                        </button>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
            }

            renderCart() {
                return `
                    <div class="bg-gray-50" style="min-height: 100vh;">
                        <nav class="shadow-sm">
                            <div style="display: flex; align-items: center; gap: 0.75rem;">
                                <img src="nest.jpg" alt="Nest Logo" class="logo-nav">
                                <h1 class="text-2xl font-bold text-orange-900">Shopping Cart</h1>
                            </div>
                            <div class="flex gap-4">
                                <button class="theme-toggle" title="Toggle dark mode">
                                    ${this.isDarkMode ? '‚òÄÔ∏è' : 'üåô'}
                                </button>
                                <button class="btn-continue-shop text-orange-600 hover:text-orange-700" style="background: none; padding: 0;">
                                    Continue Shopping
                                </button>
                            </div>
                        </nav>

                        <div class="container max-w-4xl" style="padding: 2rem;">
                            ${this.cart.length === 0 ? `
                                <div class="text-center py-12">
                                    <p class="text-xl text-gray-600 mb-4">Your cart is empty</p>
                                    <button class="btn-start-shop bg-orange-500 text-white px-6 py-3 rounded-lg hover:bg-orange-600">
                                        Start Shopping
                                    </button>
                                </div>
                            ` : `
                                <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                                    ${this.cart.map(item => `
                                        <div class="cart-item flex items-center justify-between py-4 border-b" style="border-bottom: 1px solid #d1d5db; padding: 1rem 0;">
                                            <div class="flex items-center gap-4">
                                                <div class="text-3xl">ü•ö</div>
                                                <div>
                                                    <h3 class="font-semibold text-gray-900">${item.name}</h3>
                                                    <p class="text-gray-600">$${item.price.toFixed(2)} each</p>
                                                </div>
                                            </div>
                                            <div class="flex items-center gap-4">
                                                <div class="flex items-center gap-2">
                                                    <button class="btn-qty-dec bg-gray-200 px-3 py-1 rounded hover:bg-gray-300" data-item-id="${item.id}">‚àí</button>
                                                    <span class="px-4 font-semibold">${item.quantity}</span>
                                                    <button class="btn-qty-inc bg-gray-200 px-3 py-1 rounded hover:bg-gray-300" data-item-id="${item.id}">+</button>
                                                </div>
                                                <p class="font-bold text-gray-900 w-20 text-right">
                                                    $${(item.price * item.quantity).toFixed(2)}
                                                </p>
                                                <button class="btn-remove text-red-500 hover:text-red-700" style="background: none; padding: 0;" data-item-id="${item.id}">üóëÔ∏è</button>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>

                                <div class="bg-white rounded-lg shadow-md p-6">
                                    <div class="flex justify-between items-center text-2xl font-bold mb-6">
                                        <span>Total:</span>
                                        <span class="text-orange-600">$${this.getCartTotal()}</span>
                                    </div>
                                    <button class="btn-checkout w-full bg-orange-500 text-white py-3 rounded-lg text-lg font-semibold hover:bg-orange-600">
                                        Proceed to Checkout
                                    </button>
                                </div>
                            `}
                        </div>
                    </div>
                `;
            }

            renderCheckout() {
                return `
                    <div class="bg-gray-50" style="min-height: 100vh;">
                        <nav class="shadow-sm">
                            <div style="display: flex; align-items: center; gap: 0.75rem;">
                                <img src="nest.jpg" alt="Nest Logo" class="logo-nav">
                                <h1 class="text-2xl font-bold text-orange-900">Checkout</h1>
                            </div>
                            <button class="theme-toggle" title="Toggle dark mode">
                                ${this.isDarkMode ? '‚òÄÔ∏è' : 'üåô'}
                            </button>
                        </nav>

                        <div class="container max-w-4xl" style="padding: 2rem;">
                            <div class="grid grid-cols-2" style="gap: 1.5rem;">
                                <div class="bg-white rounded-lg shadow-md p-6">
                                    <h2 class="text-xl font-bold mb-4">Customer Information</h2>
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                                            <input type="text" id="customer-name" class="w-full border border-gray-300 rounded-lg px-3 py-2" placeholder="John Doe" value="${this.customerInfo.name}">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
                                            <input type="tel" id="customer-phone" class="w-full border border-gray-300 rounded-lg px-3 py-2" placeholder="555-0123" value="${this.customerInfo.phone}">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Delivery Address</label>
                                            <textarea id="customer-address" class="w-full border border-gray-300 rounded-lg px-3 py-2" rows="3" placeholder="123 Main St, City, State">${this.customerInfo.address}</textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Payment Method</label>
                                            <select id="customer-payment" class="w-full border border-gray-300 rounded-lg px-3 py-2">
                                                <option value="cash" ${this.customerInfo.payment === 'cash' ? 'selected' : ''}>Cash on Delivery</option>
                                                <option value="card" ${this.customerInfo.payment === 'card' ? 'selected' : ''}>Credit/Debit Card</option>
                                                <option value="mobile" ${this.customerInfo.payment === 'mobile' ? 'selected' : ''}>Mobile Payment</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-white rounded-lg shadow-md p-6">
                                    <h2 class="text-xl font-bold mb-4">Order Summary</h2>
                                    <div class="space-y-2 mb-4">
                                        ${this.cart.map(item => `
                                            <div class="flex justify-between text-gray-700">
                                                <span>${item.name} √ó ${item.quantity}</span>
                                                <span>$${(item.price * item.quantity).toFixed(2)}</span>
                                            </div>
                                        `).join('')}
                                    </div>
                                    <div class="border-t pt-4 mb-6" style="border-top: 1px solid #d1d5db; padding-top: 1rem;">
                                        <div class="flex justify-between text-2xl font-bold">
                                            <span>Total:</span>
                                            <span class="text-orange-600">$${this.getCartTotal()}</span>
                                        </div>
                                    </div>
                                    <button class="btn-confirm w-full bg-orange-500 text-white py-3 rounded-lg text-lg font-semibold hover:bg-orange-600 mb-2">
                                        Confirm Order
                                    </button>
                                    <button class="btn-back-cart w-full bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300">
                                        Back to Cart
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            renderSuccess() {
                const lastOrder = this.orders[this.orders.length - 1];
                const review = lastOrder ? this.getOrderReview(lastOrder.id) : null;

                return `
                    <div class="min-h-screen bg-gray-50 flex-col" style="justify-content: center;">
                        <div class="bg-white rounded-lg shadow-md p-8 max-w-2xl w-full text-center">
                            <div style="font-size: 4rem; color: #22c55e; margin: 1rem auto; width: fit-content;">‚úì</div>
                            <h2 class="text-2xl font-bold text-gray-900 mb-2">Order Confirmed!</h2>
                            <p class="text-gray-600 mb-8">
                                Thank you for your order. We'll deliver your fresh eggs soon!
                            </p>

                            ${lastOrder ? `
                                <div class="border-t pt-6 mb-6">
                                    <h3 class="text-xl font-bold text-gray-900 mb-4">Rate Your Experience</h3>
                                    <div style="background-color: var(--card-bg); padding: 1.5rem; border-radius: 0.5rem;">
                                        <div class="mb-4">
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Rating</label>
                                            <div style="display: flex; gap: 0.5rem; justify-content: center;">
                                                ${[1, 2, 3, 4, 5].map(star => `
                                                    <button class="rating-star" data-rating="${star}" data-order-id="${lastOrder.id}" style="background: none; font-size: 2rem; cursor: pointer; transition: transform 0.2s; ${review && review.rating >= star ? 'filter: drop-shadow(0 0 3px #fbbf24);' : ''}">
                                                        ${review && review.rating >= star ? '‚≠ê' : '‚òÜ'}
                                                    </button>
                                                `).join('')}
                                            </div>
                                        </div>

                                        <div class="mb-4">
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Comment (Optional)</label>
                                            <textarea id="review-comment" class="w-full border border-gray-300 rounded-lg px-3 py-2" rows="3" placeholder="Share your thoughts about the eggs..." style="background-color: var(--card-bg);">${review ? review.comment : ''}</textarea>
                                        </div>

                                        <button class="btn-submit-review bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600" data-order-id="${lastOrder.id}">
                                            Submit Review
                                        </button>
                                    </div>
                                </div>
                            ` : ''}

                            <button class="btn-back-home bg-orange-500 text-white px-6 py-3 rounded-lg hover:bg-orange-600">
                                Back to Home
                            </button>
                        </div>
                    </div>
                `;
            }

            renderAdminLogin() {
                return `
                    <div class="min-h-screen bg-gray-50 flex-col" style="justify-content: center;">
                        <div class="bg-white rounded-lg shadow-md p-8 max-w-md w-full">
                            <h2 class="text-2xl font-bold text-gray-900 mb-6">Admin Login</h2>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                    <input type="email" id="admin-email" class="w-full border border-gray-300 rounded-lg px-3 py-2" placeholder="admin@eggs.com">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                                    <input type="password" id="admin-password" class="w-full border border-gray-300 rounded-lg px-3 py-2" placeholder="admin123">
                                </div>
                                <button class="btn-admin-submit w-full bg-orange-500 text-white py-2 rounded-lg hover:bg-orange-600">
                                    Login
                                </button>
                                <button class="btn-admin-back w-full bg-gray-200 text-gray-700 py-2 rounded-lg hover:bg-gray-300">
                                    Back
                                </button>
                            </div>
                            <p class="mt-4 text-sm text-gray-500 text-center">
                                Demo: admin@eggs.com / admin123
                            </p>
                        </div>
                    </div>
                `;
            }

            renderReviews() {
                const avgRating = this.getAverageRating();

                return `
                    <div class="bg-gray-50" style="min-height: 100vh;">
                        <nav class="shadow-sm">
                            <div style="display: flex; align-items: center; gap: 0.75rem;">
                                <img src="nest.jpg" alt="Nest Logo" class="logo-nav">
                                <h1 class="text-2xl font-bold text-orange-900">‚≠ê Customer Reviews</h1>
                            </div>
                            <div class="flex gap-4">
                                <button class="theme-toggle" title="Toggle dark mode">
                                    ${this.isDarkMode ? '‚òÄÔ∏è' : 'üåô'}
                                </button>
                                <button class="btn-back-home-reviews text-orange-600 hover:text-orange-700" style="background: none; padding: 0;">
                                    Back to Home
                                </button>
                            </div>
                        </nav>

                        <div class="container max-w-4xl" style="padding: 2rem;">
                            <div class="bg-white rounded-lg shadow-md p-8 mb-6" style="background-color: var(--card-bg); text-align: center;">
                                <h2 class="text-4xl font-bold text-orange-600 mb-2">${avgRating}</h2>
                                <div style="font-size: 2rem; letter-spacing: 0.25rem;">
                                    ${Array(Math.round(avgRating)).fill('‚≠ê').join('')}${Array(5 - Math.round(avgRating)).fill('‚òÜ').join('')}
                                </div>
                                <p class="text-gray-600 mt-4">Based on ${this.reviews.length} customer ${this.reviews.length === 1 ? 'review' : 'reviews'}</p>
                            </div>

                            ${this.reviews.length === 0 ? `
                                <div class="bg-white rounded-lg shadow-md p-8 text-center" style="background-color: var(--card-bg);">
                                    <p class="text-gray-600 text-lg">No reviews yet. Be the first to review!</p>
                                    <button class="btn-shop-now-reviews bg-orange-500 text-white px-6 py-3 rounded-lg hover:bg-orange-600 mt-4">
                                        Shop Now
                                    </button>
                                </div>
                            ` : `
                                <div class="space-y-4">
                                    ${this.reviews.map((review, index) => {
                                        const ratingBreakdown = [0, 0, 0, 0, 0];
                                        ratingBreakdown[review.rating - 1]++;
                                        
                                        return `
                                            <div class="bg-white rounded-lg shadow-md p-6" style="background-color: var(--card-bg);">
                                                <div class="flex justify-between items-start mb-3">
                                                    <div>
                                                        <h3 class="font-bold text-lg text-gray-900">${review.customerName}</h3>
                                                        <p class="text-sm text-gray-500">${review.date}</p>
                                                    </div>
                                                    <div style="font-size: 1.5rem;">
                                                        ${Array(review.rating).fill('‚≠ê').join('')}${Array(5 - review.rating).fill('‚òÜ').join('')}
                                                    </div>
                                                </div>
                                                ${review.comment ? `
                                                    <p class="text-gray-700">${review.comment}</p>
                                                ` : `
                                                    <p class="text-gray-500 italic">No comment provided</p>
                                                `}
                                            </div>
                                        `;
                                    }).join('')}
                                </div>
                            `}
                        </div>
                    </div>
                `;
            }

            renderAdminDashboard() {
                const activeTab = window.adminActiveTab || 'products';
                const pendingOrdersCount = this.orders.filter(o => o.status === 'pending').length;

                let content = '';

                if (activeTab === 'products') {
                    content = `
                        <div class="bg-white rounded-lg shadow-md p-6">
                            <h2 class="text-xl font-bold mb-4">Manage Products</h2>
                            <div class="space-y-4">
                                ${this.products.map(product => `
                                    <div class="border rounded-lg p-4">
                                        ${this.editingProduct === product.id ? `
                                            <div class="space-y-3">
                                                <div class="grid grid-cols-2" style="gap: 1rem;">
                                                    <div>
                                                        <label class="block text-sm font-medium mb-1">Price</label>
                                                        <input type="number" step="0.01" id="price-${product.id}" class="w-full border rounded px-3 py-2" value="${product.price}">
                                                    </div>
                                                    <div>
                                                        <label class="block text-sm font-medium mb-1">Stock</label>
                                                        <input type="number" id="stock-${product.id}" class="w-full border rounded px-3 py-2" value="${product.stock}">
                                                    </div>
                                                </div>
                                                <div class="flex gap-2">
                                                    <button class="btn-save-product bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600" data-product-id="${product.id}">
                                                        Save
                                                    </button>
                                                    <button class="btn-cancel-edit bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400">
                                                        Cancel
                                                    </button>
                                                </div>
                                            </div>
                                        ` : `
                                            <div class="flex justify-between items-center">
                                                <div>
                                                    <h3 class="font-bold text-lg">${product.name}</h3>
                                                    <p class="text-gray-600">
                                                        Price: $${product.price.toFixed(2)} | Stock: ${product.stock} | ${product.eggs} eggs ($${(product.price / product.eggs).toFixed(3)}/egg)
                                                    </p>
                                                </div>
                                                <button class="btn-edit-product flex items-center gap-2 bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600" data-product-id="${product.id}">
                                                    ‚úèÔ∏è Edit
                                                </button>
                                            </div>
                                        `}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                } else if (activeTab === 'orders') {
                    content = `
                        <div class="bg-white rounded-lg shadow-md p-6">
                            <h2 class="text-xl font-bold mb-4">Orders</h2>
                            ${this.orders.length === 0 ? `
                                <p class="text-gray-600">No orders yet</p>
                            ` : `
                                <div class="space-y-4">
                                    ${this.orders.map(order => `
                                        <div class="border rounded-lg p-4">
                                            <div class="flex justify-between items-start mb-2">
                                                <div>
                                                    <p class="font-bold">Order #${order.id}</p>
                                                    <p class="text-sm text-gray-600">${order.date}</p>
                                                    <p class="text-sm text-gray-600">${order.customer.name} - ${order.customer.phone}</p>
                                                    <p class="text-sm text-gray-600">${order.customer.address}</p>
                                                </div>
                                                <div class="text-right">
                                                    <p class="font-bold text-lg">$${order.total}</p>
                                                    <span style="display: inline-block; font-size: 0.875rem; padding: 0.25rem 0.75rem; border-radius: 9999px; ${order.status === 'completed' ? 'background-color: #dcfce7; color: #15803d;' : 'background-color: #fef08a; color: #ca8a04;'}">
                                                        ${order.status}
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="mt-2 text-sm text-gray-600">
                                                ${order.items.map(item => `<div>‚Ä¢ ${item.name} √ó ${item.quantity}</div>`).join('')}
                                            </div>
                                            ${order.status === 'pending' ? `
                                                <button class="btn-complete-order mt-3 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600" data-order-id="${order.id}">
                                                    Mark as Completed
                                                </button>
                                            ` : ''}
                                        </div>
                                    `).join('')}
                                </div>
                            `}
                        </div>
                    `;
                } else if (activeTab === 'settings') {
                    const crateProduct = this.products.find(p => p.id === 3);
                    const avgRating = this.getAverageRating();
                    content = `
                        <div class="bg-white rounded-lg shadow-md p-6">
                            <h2 class="text-xl font-bold mb-4">Settings & Reviews</h2>
                            <div class="space-y-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        Crate Size (eggs per crate)
                                    </label>
                                    <select id="crate-size" class="border border-gray-300 rounded-lg px-4 py-2">
                                        <option value="30" ${this.crateSize === 30 ? 'selected' : ''}>30 eggs</option>
                                        <option value="36" ${this.crateSize === 36 ? 'selected' : ''}>36 eggs</option>
                                    </select>
                                    <p class="text-sm text-gray-500 mt-1">
                                        Current crate contains ${this.crateSize} eggs at $${crateProduct ? crateProduct.price.toFixed(2) : '0.00'}
                                    </p>
                                </div>

                                <div class="border-t pt-6" style="border-top: 1px solid var(--border-color);">
                                    <h3 class="text-lg font-bold mb-4">üìä Customer Reviews</h3>
                                    <p class="text-sm text-gray-600 mb-2">Average Rating: <span class="font-bold">${avgRating} ‚≠ê</span> (${this.reviews.length} reviews)</p>
                                    
                                    ${this.reviews.length > 0 ? `
                                        <div class="space-y-3 mt-4">
                                            ${this.reviews.slice(-5).reverse().map(review => `
                                                <div style="background-color: var(--bg-secondary); padding: 1rem; border-radius: 0.5rem; border-left: 4px solid #f97316;">
                                                    <div class="flex justify-between items-start mb-1">
                                                        <span class="font-semibold text-gray-900">${review.customerName}</span>
                                                        <span class="text-sm text-gray-500">${review.date}</span>
                                                    </div>
                                                    <div class="mb-2">
                                                        ${Array(review.rating).fill('‚≠ê').join('') + Array(5 - review.rating).fill('‚òÜ').join('')}
                                                    </div>
                                                    <p class="text-sm text-gray-700">${review.comment || '(No comment provided)'}</p>
                                                </div>
                                            `).join('')}
                                        </div>
                                    ` : `
                                        <p class="text-sm text-gray-500">No reviews yet</p>
                                    `}
                                </div>
                            </div>
                        </div>
                    `;
                }

                return `
                    <div class="bg-gray-50" style="min-height: 100vh;">
                        <nav class="nav-orange">
                            <div style="display: flex; align-items: center; gap: 0.75rem;">
                                <img src="nest.jpg" alt="Nest Logo" class="logo-admin">
                                <h1 class="text-2xl font-bold">Admin Dashboard</h1>
                            </div>
                            <button class="btn-logout flex items-center gap-2 bg-orange-700 text-white px-4 py-2 rounded-lg hover:bg-orange-800" style="background-color: #c2410c;">
                                üö™ Logout
                            </button>
                        </nav>

                        <div class="container max-w-6xl" style="padding: 2rem;">
                            <div class="flex gap-4 mb-6 flex-wrap">
                                <button class="btn-tab-products flex items-center gap-2 px-4 py-2 rounded-lg ${activeTab === 'products' ? 'bg-orange-500 text-white' : 'bg-white text-gray-700'}" data-tab="products">
                                    üì¶ Products
                                </button>
                                <button class="btn-tab-orders flex items-center gap-2 px-4 py-2 rounded-lg ${activeTab === 'orders' ? 'bg-orange-500 text-white' : 'bg-white text-gray-700'}" data-tab="orders">
                                    üõí Orders (${pendingOrdersCount})
                                </button>
                                <button class="btn-tab-settings flex items-center gap-2 px-4 py-2 rounded-lg ${activeTab === 'settings' ? 'bg-orange-500 text-white' : 'bg-white text-gray-700'}" data-tab="settings">
                                    ‚öôÔ∏è Settings
                                </button>
                            </div>

                            ${content}
                        </div>
                    </div>
                `;
            }

            attachEventListeners() {
                // Home page
                const shopBtn = document.querySelector('.btn-shop-now');
                if (shopBtn) shopBtn.addEventListener('click', () => this.setPage('shop'));

                const adminLoginBtn = document.querySelector('.btn-admin-login');
                if (adminLoginBtn) adminLoginBtn.addEventListener('click', () => this.setPage('admin-login'));

                // Shop page
                const homeBtn = document.querySelector('.btn-home');
                if (homeBtn) homeBtn.addEventListener('click', () => this.setPage('home'));

                const cartViewBtn = document.querySelector('.btn-cart-view');
                if (cartViewBtn) cartViewBtn.addEventListener('click', () => this.setPage('cart'));

                const addToCartBtns = document.querySelectorAll('.btn-add-to-cart');
                addToCartBtns.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const productId = parseInt(e.target.dataset.productId);
                        const product = this.products.find(p => p.id === productId);
                        if (product && product.stock > 0) {
                            this.addToCart(product);
                        }
                    });
                });

                // Cart page
                const continueShopBtn = document.querySelector('.btn-continue-shop');
                if (continueShopBtn) continueShopBtn.addEventListener('click', () => this.setPage('shop'));

                const startShopBtn = document.querySelector('.btn-start-shop');
                if (startShopBtn) startShopBtn.addEventListener('click', () => this.setPage('shop'));

                const qtyDecBtns = document.querySelectorAll('.btn-qty-dec');
                qtyDecBtns.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const itemId = parseInt(e.target.dataset.itemId);
                        const item = this.cart.find(i => i.id === itemId);
                        if (item) this.updateCartQuantity(itemId, item.quantity - 1);
                    });
                });

                const qtyIncBtns = document.querySelectorAll('.btn-qty-inc');
                qtyIncBtns.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const itemId = parseInt(e.target.dataset.itemId);
                        const item = this.cart.find(i => i.id === itemId);
                        if (item) this.updateCartQuantity(itemId, item.quantity + 1);
                    });
                });

                const removeBtns = document.querySelectorAll('.btn-remove');
                removeBtns.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const itemId = parseInt(e.target.dataset.itemId);
                        this.removeFromCart(itemId);
                    });
                });

                const checkoutBtn = document.querySelector('.btn-checkout');
                if (checkoutBtn) checkoutBtn.addEventListener('click', () => this.setPage('checkout'));

                // Checkout page
                const customerNameInput = document.getElementById('customer-name');
                if (customerNameInput) {
                    customerNameInput.addEventListener('input', (e) => {
                        this.customerInfo.name = e.target.value;
                        e.target.style.borderColor = e.target.value ? '#22c55e' : '#d1d5db';
                    });
                }

                const customerPhoneInput = document.getElementById('customer-phone');
                if (customerPhoneInput) {
                    customerPhoneInput.addEventListener('input', (e) => {
                        this.customerInfo.phone = e.target.value;
                        const isValid = /^\d{0,}$|^\d{3}-?\d{3}-?\d{4}$/.test(e.target.value.replace(/\D/g, ''));
                        e.target.style.borderColor = isValid || !e.target.value ? '#22c55e' : '#ef4444';
                    });
                }

                const customerAddressInput = document.getElementById('customer-address');
                if (customerAddressInput) {
                    customerAddressInput.addEventListener('input', (e) => {
                        this.customerInfo.address = e.target.value;
                        e.target.style.borderColor = e.target.value ? '#22c55e' : '#d1d5db';
                    });
                }

                const customerPaymentSelect = document.getElementById('customer-payment');
                if (customerPaymentSelect) {
                    customerPaymentSelect.addEventListener('change', (e) => {
                        this.customerInfo.payment = e.target.value;
                    });
                }

                const confirmBtn = document.querySelector('.btn-confirm');
                if (confirmBtn) {
                    confirmBtn.addEventListener('click', (e) => {
                        e.target.innerHTML = '‚è≥ Processing...';
                        e.target.disabled = true;
                        setTimeout(() => {
                            this.handleCheckout();
                        }, 500);
                    });
                }

                const backCartBtn = document.querySelector('.btn-back-cart');
                if (backCartBtn) backCartBtn.addEventListener('click', () => this.setPage('cart'));

                // Success page
                const backHomeBtn = document.querySelector('.btn-back-home');
                if (backHomeBtn) backHomeBtn.addEventListener('click', () => this.setPage('home'));

                // Rating and Review
                const ratingStars = document.querySelectorAll('.rating-star');
                ratingStars.forEach(star => {
                    star.addEventListener('click', (e) => {
                        const rating = parseInt(e.target.dataset.rating);
                        const orderId = parseInt(e.target.dataset.orderId);
                        
                        // Update all stars
                        document.querySelectorAll('.rating-star').forEach(s => {
                            const r = parseInt(s.dataset.rating);
                            s.textContent = r <= rating ? '‚≠ê' : '‚òÜ';
                            s.style.filter = r <= rating ? 'drop-shadow(0 0 3px #fbbf24)' : 'none';
                        });

                        // Store rating temporarily
                        window.selectedRating = rating;
                    });

                    star.addEventListener('mouseover', (e) => {
                        const rating = parseInt(e.target.dataset.rating);
                        document.querySelectorAll('.rating-star').forEach(s => {
                            const r = parseInt(s.dataset.rating);
                            s.textContent = r <= rating ? '‚≠ê' : '‚òÜ';
                            s.style.opacity = '0.7';
                        });
                    });

                    star.addEventListener('mouseout', (e) => {
                        const savedRating = window.selectedRating || 0;
                        document.querySelectorAll('.rating-star').forEach(s => {
                            const r = parseInt(s.dataset.rating);
                            s.textContent = r <= savedRating ? '‚≠ê' : '‚òÜ';
                            s.style.opacity = '1';
                        });
                    });
                });

                const submitReviewBtn = document.querySelector('.btn-submit-review');
                if (submitReviewBtn) {
                    submitReviewBtn.addEventListener('click', (e) => {
                        const orderId = parseInt(e.target.dataset.orderId);
                        const rating = window.selectedRating || 0;
                        const comment = document.getElementById('review-comment')?.value || '';

                        if (rating === 0) {
                            Toast.show('Please select a rating', 'error');
                            return;
                        }

                        this.addReview(orderId, rating, comment);
                    });
                }

                // Admin Login
                const adminEmailInput = document.getElementById('admin-email');
                if (adminEmailInput) {
                    adminEmailInput.addEventListener('change', (e) => {
                        this.adminEmail = e.target.value;
                    });
                }

                const adminPasswordInput = document.getElementById('admin-password');
                if (adminPasswordInput) {
                    adminPasswordInput.addEventListener('change', (e) => {
                        this.adminPassword = e.target.value;
                    });
                }

                const adminSubmitBtn = document.querySelector('.btn-admin-submit');
                if (adminSubmitBtn) adminSubmitBtn.addEventListener('click', () => this.handleAdminLogin());

                const adminBackBtn = document.querySelector('.btn-admin-back');
                if (adminBackBtn) adminBackBtn.addEventListener('click', () => this.setPage('home'));

                // Reviews page
                const viewReviewsBtn = document.querySelector('.btn-view-reviews');
                if (viewReviewsBtn) viewReviewsBtn.addEventListener('click', () => this.setPage('reviews'));

                const backHomeReviewsBtn = document.querySelector('.btn-back-home-reviews');
                if (backHomeReviewsBtn) backHomeReviewsBtn.addEventListener('click', () => this.setPage('home'));

                const shopNowReviewsBtn = document.querySelector('.btn-shop-now-reviews');
                if (shopNowReviewsBtn) shopNowReviewsBtn.addEventListener('click', () => this.setPage('shop'));

                // Admin Dashboard
                const logoutBtn = document.querySelector('.btn-logout');
                if (logoutBtn) {
                    logoutBtn.addEventListener('click', () => {
                        this.isAdmin = false;
                        this.setPage('home');
                    });
                }

                const tabBtns = document.querySelectorAll('[class^="btn-tab-"]');
                tabBtns.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const tab = e.target.dataset.tab;
                        window.adminActiveTab = tab;
                        this.render();
                    });
                });

                const editProductBtns = document.querySelectorAll('.btn-edit-product');
                editProductBtns.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const productId = parseInt(e.target.closest('button').dataset.productId);
                        this.editingProduct = productId;
                        this.render();
                    });
                });

                const saveProductBtns = document.querySelectorAll('.btn-save-product');
                saveProductBtns.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const productId = parseInt(e.target.dataset.productId);
                        const price = parseFloat(document.getElementById(`price-${productId}`).value);
                        const stock = parseInt(document.getElementById(`stock-${productId}`).value);
                        this.updateProduct(productId, { price, stock });
                    });
                });

                const cancelEditBtn = document.querySelector('.btn-cancel-edit');
                if (cancelEditBtn) {
                    cancelEditBtn.addEventListener('click', () => {
                        this.editingProduct = null;
                        this.render();
                    });
                }

                const completeOrderBtns = document.querySelectorAll('.btn-complete-order');
                completeOrderBtns.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const orderId = parseInt(e.target.dataset.orderId);
                        this.markOrderComplete(orderId);
                    });
                });

                const crateSizeSelect = document.getElementById('crate-size');
                if (crateSizeSelect) {
                    crateSizeSelect.addEventListener('change', (e) => {
                        this.setCrateSize(parseInt(e.target.value));
                    });
                }

                // Theme toggle button
                const themeToggleBtns = document.querySelectorAll('.theme-toggle');
                themeToggleBtns.forEach(btn => {
                    btn.addEventListener('click', () => {
                        themeManager.toggle();
                        this.isDarkMode = themeManager.isDark();
                        this.render();
                    });
                });
            }
        }

        // Initialize theme manager first
        const themeManager = new ThemeManager();

        // Initialize chatbot
        const chatbot = new Chatbot();

        // Initialize app
        const app = new EggStore();
    </script>
</body>
</html>
